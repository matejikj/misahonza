---
import { homepageData } from "../../data/homepage";
import ButtonLink from "../ui/ButtonLink.astro";
import SectionHeading from "../ui/SectionHeading.astro";

interface Props {
  contact: typeof homepageData.contact;
}

const { contact } = Astro.props;

const toHref = (label: string, value: string) => {
  const key = label.toLowerCase();
  if (key.includes("telefon")) return `tel:${value.replace(/\s+/g, "")}`;
  if (key.includes("e-mail") || key.includes("email")) return `mailto:${value}`;
  return null;
};
---

<section id="contact" class="section-shell-xl">
  <div class="container-page">
    <div class="surface-panel p-6 md:p-8 lg:p-10">
      <div class="grid gap-8 lg:grid-cols-12 lg:items-start">
        <div class="lg:col-span-7">
          <p class="editorial-caption">První krok bez závazku</p>
          <SectionHeading title={contact.title} description={contact.description} />
          <div class="mt-8 flex flex-col gap-3 sm:flex-row sm:flex-wrap">
            <ButtonLink href={contact.primaryCta.href} label={contact.primaryCta.label} />
            <ButtonLink
              href={contact.secondaryCta.href}
              label={contact.secondaryCta.label}
              variant="secondary"
            />
          </div>
          <p class="mt-4 text-sm text-text-muted">
            Typicky stačí krátký popis prostoru nebo pár fotografií. Ozveme se s návrhem dalšího kroku.
          </p>
        </div>

        <div class="lg:col-span-5">
          <div class="rounded-lg border hairline bg-bg-soft/70 p-5">
            <p class="editorial-caption mb-4">Kontakt a působnost</p>
            <dl class="space-y-3">
              {contact.details.map((item) => {
                const href = toHref(item.label, item.value);
                return (
                <div class="grid grid-cols-[96px_1fr] gap-3 text-sm">
                  <dt class="text-text-muted">{item.label}</dt>
                  <dd class="font-medium text-text">
                    {href ? (
                      <a href={href} class="focus-ring rounded-sm underline-offset-2 hover:underline">
                        {item.value}
                      </a>
                    ) : (
                      item.value
                    )}
                  </dd>
                </div>
                );
              })}
            </dl>
            <div class="mt-5 rounded-md border hairline bg-surface p-3 text-sm text-text-muted">
              Cíl této sekce je domluvit první konzultaci, ne okamžitý závazek.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
